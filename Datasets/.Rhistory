plot(rules)
sel <- plot(rules, measure=c("support", "lift"), shading = "confidence", interactive = TRUE)
subrules2 <- head(rules, n = 10, by = "lift")
plot(subrules2, method = "graph")
inspect(sort(rules, by = "lift"))
itemrules <- subset(rules, items %in% "SPH0016")
inspect(itemrules)
products_with_category<- read.csv("products_with_category.csv", sep=",")
trans_epic3<- read.transactions("trans.csv" , sep=",", format = "basket", rm.duplicates=TRUE)
match2 <- match(trans_epic2@itemInfo$labels, products_with_category$sku)
products_with_category_ordered <- products_with_category[match2,]
trans_epic3@itemInfo$categories <-  products_with_category_ordered$manual_categories
trans_epic4 <- aggregate(trans_epic3, itemInfo(trans_epic3)[["categories"]])
rules2<- apriori(trans_epic4, parameter = list(supp = 0.04, conf = 0.75, minlen=2))
inspect(rules2, ruleSep = "---->", itemSep = " + ", setStart = "", setEnd ="", linebreak = FALSE)
rules3<- apriori(trans_epic4, parameter = list(supp = 0.02, conf = 0.75), appearance = list(none = c("accessories")))
inspect(rules3, ruleSep = "---->", itemSep = " + ", setStart = "", setEnd ="", linebreak = FALSE)
inspect(sort(rules3, by="lift"))
rules4 <- apriori(trans_epic4, parameter=list (supp=0.000001,conf = 0.00001), appearance = list (lhs="smartphone"), control = list (verbose=F))
rules5 <- apriori(trans_epic4, parameter=list (supp=0.000001,conf = 0.00001), appearance = list (none = c("accessories"), lhs="smartphone"), control = list (verbose=F))
ruleExplorer(rules4)
itms <- itemFrequency(trans_epic4, type = "absolute")
head(sort(itms, decreasing = TRUE), n = 20)
barplot(itms)
products_translated<- read.csv("products_translated.csv", sep=",")
products_translated<- products_translated [,1:3]
products_translated<- products_translated [,-2]
match3 <- match(trans_epic2@itemInfo$labels, products_translated$sku)
products_translated_ordered <- products_translated[match3,]
trade_mark <- substr(products_translated_ordered$sku,1,3)
products_with_category_ordered_2 <- products_with_category_ordered
products_with_category_ordered_2$trade_mark <- trade_mark
products_with_category_ordered_2$trade_mark_full <- as.character(c("Unknown_Brand"))
products_with_category_ordered_2$trade_mark <- ifelse(is.na(products_with_category_ordered_2$trade_mark), 'TEMPORAL', products_with_category_ordered_2$trade_mark)
products_with_category_ordered_2$manual_categories <- as.character(products_with_category_ordered_2$manual_categories)
products_with_category_ordered_2$manual_categories <- ifelse(is.na(products_with_category_ordered_2$manual_categories), 'NO_DATA', products_with_category_ordered_2$manual_categories)
for (row in 1:nrow(products_with_category_ordered_2)) {
if(products_with_category_ordered_2[row,3]=="8MO"){products_with_category_ordered_2[row,4]<- c("8Mobility")
} else if (products_with_category_ordered_2[row,3]=="ACM") {products_with_category_ordered_2[row,4]<- c("Acme")
} else if (products_with_category_ordered_2[row,3]=="ADN") {products_with_category_ordered_2[row,4]<- c("Adonit")
} else if (products_with_category_ordered_2[row,3]=="AII") {products_with_category_ordered_2[row,4]<- c("Aiino")
} else if (products_with_category_ordered_2[row,3]=="AKI") {products_with_category_ordered_2[row,4]<- c("Akitio")
} else if (products_with_category_ordered_2[row,3]=="ALL") {products_with_category_ordered_2[row,4]<- c("Allocacoc")
} else if (products_with_category_ordered_2[row,3]=="AP2") {products_with_category_ordered_2[row,4]<- c("Apple_Second_Hand")
} else if (products_with_category_ordered_2[row,3]=="APP") {products_with_category_ordered_2[row,4]<- c("Apple_Brand_New")
} else if (products_with_category_ordered_2[row,3]=="BAN") {products_with_category_ordered_2[row,4]<- c("Apple_Panama")
} else if (products_with_category_ordered_2[row,3]=="BEA") {products_with_category_ordered_2[row,4]<- c("BeatsX")
} else if (products_with_category_ordered_2[row,3]=="BEL") {products_with_category_ordered_2[row,4]<- c("Belkin")
} else if (products_with_category_ordered_2[row,3]=="BEZ") {products_with_category_ordered_2[row,4]<- c("Beez")
} else if (products_with_category_ordered_2[row,3]=="BLL") {products_with_category_ordered_2[row,4]<- c("Blue_Lounge")
} else if (products_with_category_ordered_2[row,3]=="BLM") {products_with_category_ordered_2[row,4]<- c("Blue")
} else if (products_with_category_ordered_2[row,3]=="BNQ") {products_with_category_ordered_2[row,4]<- c("BenQ")
} else if (products_with_category_ordered_2[row,3]=="BOD") {products_with_category_ordered_2[row,4]<- c("BodyGuardz")
} else if (products_with_category_ordered_2[row,3]=="BOO") {products_with_category_ordered_2[row,4]<- c("Booq")
} else if (products_with_category_ordered_2[row,3]=="BOS") {products_with_category_ordered_2[row,4]<- c("Bose")
} else if (products_with_category_ordered_2[row,3]=="BTC") {products_with_category_ordered_2[row,4]<- c("Boostcase")
} else if (products_with_category_ordered_2[row,3]=="CAI") {products_with_category_ordered_2[row,4]<- c("Casetify")
} else if (products_with_category_ordered_2[row,3]=="CEL") {products_with_category_ordered_2[row,4]<- c("Celly")
} else if (products_with_category_ordered_2[row,3]=="COG") {products_with_category_ordered_2[row,4]<- c("Cogito")
} else if (products_with_category_ordered_2[row,3]=="CRU") {products_with_category_ordered_2[row,4]<- c("Crucial")
} else if (products_with_category_ordered_2[row,3]=="CYB") {products_with_category_ordered_2[row,4]<- c("CyberPower")
} else if (products_with_category_ordered_2[row,3]=="CYG") {products_with_category_ordered_2[row,4]<- c("Cygnett")
} else if (products_with_category_ordered_2[row,3]=="DEV") {products_with_category_ordered_2[row,4]<- c("Devolo")
} else if (products_with_category_ordered_2[row,3]=="DJI") {products_with_category_ordered_2[row,4]<- c("DJI")
} else if (products_with_category_ordered_2[row,3]=="DLK") {products_with_category_ordered_2[row,4]<- c("D-Link")
} else if (products_with_category_ordered_2[row,3]=="DLL") {products_with_category_ordered_2[row,4]<- c("Dell")
} else if (products_with_category_ordered_2[row,3]=="DOD") {products_with_category_ordered_2[row,4]<- c("Dodocool")
} else if (products_with_category_ordered_2[row,3]=="DRO") {products_with_category_ordered_2[row,4]<- c("Drobo")
} else if (products_with_category_ordered_2[row,3]=="DVI") {products_with_category_ordered_2[row,4]<- c("Devia")
} else if (products_with_category_ordered_2[row,3]=="EIZ") {products_with_category_ordered_2[row,4]<- c("Eizo")
} else if (products_with_category_ordered_2[row,3]=="ELA") {products_with_category_ordered_2[row,4]<- c("Elago")
} else if (products_with_category_ordered_2[row,3]=="ELE") {products_with_category_ordered_2[row,4]<- c("Elevation_Apple")
} else if (products_with_category_ordered_2[row,3]=="ELG") {products_with_category_ordered_2[row,4]<- c("Elgato")
} else if (products_with_category_ordered_2[row,3]=="EVU") {products_with_category_ordered_2[row,4]<- c("Evutec")
} else if (products_with_category_ordered_2[row,3]=="FCM") {products_with_category_ordered_2[row,4]<- c("FCM")
} else if (products_with_category_ordered_2[row,3]=="FIB") {products_with_category_ordered_2[row,4]<- c("Fibaro")
} else if (products_with_category_ordered_2[row,3]=="FIF") {products_with_category_ordered_2[row,4]<- c("Fitbit")
} else if (products_with_category_ordered_2[row,3]=="GAM") {products_with_category_ordered_2[row,4]<- c("Gamevice")
} else if (products_with_category_ordered_2[row,3]=="GLY") {products_with_category_ordered_2[row,4]<- c("Glyph")
} else if (products_with_category_ordered_2[row,3]=="GOP") {products_with_category_ordered_2[row,4]<- c("GoPro")
} else if (products_with_category_ordered_2[row,3]=="GRT") {products_with_category_ordered_2[row,4]<- c("Griffin")
} else if (products_with_category_ordered_2[row,3]=="GTE") {products_with_category_ordered_2[row,4]<- c("G_Technology")
} else if (products_with_category_ordered_2[row,3]=="HAR") {products_with_category_ordered_2[row,4]<- c("Harman")
} else if (products_with_category_ordered_2[row,3]=="HGD") {products_with_category_ordered_2[row,4]<- c("Henge_Docks")
} else if (products_with_category_ordered_2[row,3]=="HGS") {products_with_category_ordered_2[row,4]<- c("HGST_Travelstar")
} else if (products_with_category_ordered_2[row,3]=="HIC") {products_with_category_ordered_2[row,4]<- c("Hitcase")
} else if (products_with_category_ordered_2[row,3]=="HOC") {products_with_category_ordered_2[row,4]<- c("	Nike_hoco_Apple")
} else if (products_with_category_ordered_2[row,3]=="HOW") {products_with_category_ordered_2[row,4]<- c("Honeywell")
} else if (products_with_category_ordered_2[row,3]=="HTE") {products_with_category_ordered_2[row,4]<- c("Hyper")
} else if (products_with_category_ordered_2[row,3]=="IAM") {products_with_category_ordered_2[row,4]<- c("I_AM")
} else if (products_with_category_ordered_2[row,3]=="ICA") {products_with_category_ordered_2[row,4]<- c("Incase")
} else if (products_with_category_ordered_2[row,3]=="IFR") {products_with_category_ordered_2[row,4]<- c("iFrogz")
} else if (products_with_category_ordered_2[row,3]=="IFX") {products_with_category_ordered_2[row,4]<- c("iFixit")
} else if (products_with_category_ordered_2[row,3]=="IHE") {products_with_category_ordered_2[row,4]<- c("iHealth")
} else if (products_with_category_ordered_2[row,3]=="IKM") {products_with_category_ordered_2[row,4]<- c("IK_Multimedia")
} else if (products_with_category_ordered_2[row,3]=="IOT") {products_with_category_ordered_2[row,4]<- c("iOttie")
} else if (products_with_category_ordered_2[row,3]=="JAB") {products_with_category_ordered_2[row,4]<- c("Jabra")
} else if (products_with_category_ordered_2[row,3]=="JAW") {products_with_category_ordered_2[row,4]<- c("Jawbone")
} else if (products_with_category_ordered_2[row,3]=="JBL") {products_with_category_ordered_2[row,4]<- c("JBL")
} else if (products_with_category_ordered_2[row,3]=="JMO") {products_with_category_ordered_2[row,4]<- c("Just_Mobile")
} else if (products_with_category_ordered_2[row,3]=="JOB") {products_with_category_ordered_2[row,4]<- c("Joby")
} else if (products_with_category_ordered_2[row,3]=="JYB") {products_with_category_ordered_2[row,4]<- c("Jaybird")
} else if (products_with_category_ordered_2[row,3]=="KAI") {products_with_category_ordered_2[row,4]<- c("Kaiser")
} else if (products_with_category_ordered_2[row,3]=="KAN") {products_with_category_ordered_2[row,4]<- c("Kanex")
} else if (products_with_category_ordered_2[row,3]=="KEN") {products_with_category_ordered_2[row,4]<- c("Kensington")
} else if (products_with_category_ordered_2[row,3]=="KEU") {products_with_category_ordered_2[row,4]<- c("kenu")
} else if (products_with_category_ordered_2[row,3]=="KIN") {products_with_category_ordered_2[row,4]<- c("Kingston")
} else if (products_with_category_ordered_2[row,3]=="KOO") {products_with_category_ordered_2[row,4]<- c("Koogeek")
} else if (products_with_category_ordered_2[row,3]=="KUA") {products_with_category_ordered_2[row,4]<- c("Kukaclip")
} else if (products_with_category_ordered_2[row,3]=="LAC") {products_with_category_ordered_2[row,4]<- c("LaCie")
} else if (products_with_category_ordered_2[row,3]=="LAN") {products_with_category_ordered_2[row,4]<- c("LandingZone")
} else if (products_with_category_ordered_2[row,3]=="LEE") {products_with_category_ordered_2[row,4]<- c("Leef")
} else if (products_with_category_ordered_2[row,3]=="LEX") {products_with_category_ordered_2[row,4]<- c("Lexar")
} else if (products_with_category_ordered_2[row,3]=="LGE") {products_with_category_ordered_2[row,4]<- c("LG")
} else if (products_with_category_ordered_2[row,3]=="LIF") {products_with_category_ordered_2[row,4]<- c("Lifeproof")
} else if (products_with_category_ordered_2[row,3]=="LMP") {products_with_category_ordered_2[row,4]<- c("LMP")
} else if (products_with_category_ordered_2[row,3]=="LOG") {products_with_category_ordered_2[row,4]<- c("Logitech")
} else if (products_with_category_ordered_2[row,3]=="LUN") {products_with_category_ordered_2[row,4]<- c("Lunatik")
} else if (products_with_category_ordered_2[row,3]=="MAC") {products_with_category_ordered_2[row,4]<- c("Macally")
} else if (products_with_category_ordered_2[row,3]=="MAK") {products_with_category_ordered_2[row,4]<- c("Maclocks")
} else if (products_with_category_ordered_2[row,3]=="MAT") {products_with_category_ordered_2[row,4]<- c("Matias")
} else if (products_with_category_ordered_2[row,3]=="MBI") {products_with_category_ordered_2[row,4]<- c("Mobility")
} else if (products_with_category_ordered_2[row,3]=="MDT") {products_with_category_ordered_2[row,4]<- c("Mediterrans")
} else if (products_with_category_ordered_2[row,3]=="MIC") {products_with_category_ordered_2[row,4]<- c("Microsoft_MAC")
} else if (products_with_category_ordered_2[row,3]=="MIN") {products_with_category_ordered_2[row,4]<- c("Minibatt")
} else if (products_with_category_ordered_2[row,3]=="MMW") {products_with_category_ordered_2[row,4]<- c("My_MW")
} else if (products_with_category_ordered_2[row,3]=="MOL") {products_with_category_ordered_2[row,4]<- c("Moleskine")
} else if (products_with_category_ordered_2[row,3]=="MOP") {products_with_category_ordered_2[row,4]<- c("Mophie")
} else if (products_with_category_ordered_2[row,3]=="MOS") {products_with_category_ordered_2[row,4]<- c("Moshi")
} else if (products_with_category_ordered_2[row,3]=="MOX") {products_with_category_ordered_2[row,4]<- c("Moxie")
} else if (products_with_category_ordered_2[row,3]=="MTF") {products_with_category_ordered_2[row,4]<- c("Mistify")
} else if (products_with_category_ordered_2[row,3]=="MUJ") {products_with_category_ordered_2[row,4]<- c("Mujjo")
} else if (products_with_category_ordered_2[row,3]=="MUV") {products_with_category_ordered_2[row,4]<- c("Muvit")
} else if (products_with_category_ordered_2[row,3]=="MYF") {products_with_category_ordered_2[row,4]<- c("MyFox")
} else if (products_with_category_ordered_2[row,3]=="NDA") {products_with_category_ordered_2[row,4]<- c("Nonda")
} else if (products_with_category_ordered_2[row,3]=="NDE") {products_with_category_ordered_2[row,4]<- c("Ndevr")
} else if (products_with_category_ordered_2[row,3]=="NEA") {products_with_category_ordered_2[row,4]<- c("Netatmo")
} else if (products_with_category_ordered_2[row,3]=="NES") {products_with_category_ordered_2[row,4]<- c("Nest")
} else if (products_with_category_ordered_2[row,3]=="NIE") {products_with_category_ordered_2[row,4]<- c("Ninebot")
} else if (products_with_category_ordered_2[row,3]=="NIM") {products_with_category_ordered_2[row,4]<- c("Nimbus")
} else if (products_with_category_ordered_2[row,3]=="NKI") {products_with_category_ordered_2[row,4]<- c("Nokia")
} else if (products_with_category_ordered_2[row,3]=="NOD") {products_with_category_ordered_2[row,4]<- c("Nodon")
} else if (products_with_category_ordered_2[row,3]=="NOK") {products_with_category_ordered_2[row,4]<- c("Noke")
} else if (products_with_category_ordered_2[row,3]=="NOM") {products_with_category_ordered_2[row,4]<- c("Nomad")
} else if (products_with_category_ordered_2[row,3]=="NTE") {products_with_category_ordered_2[row,4]<- c("NewerTech")
} else if (products_with_category_ordered_2[row,3]=="OBL") {products_with_category_ordered_2[row,4]<- c("Oblumi")
} else if (products_with_category_ordered_2[row,3]=="OLI") {products_with_category_ordered_2[row,4]<- c("Olixar")
} else if (products_with_category_ordered_2[row,3]=="OLL") {products_with_category_ordered_2[row,4]<- c("Olloclip")
} else if (products_with_category_ordered_2[row,3]=="OPU") {products_with_category_ordered_2[row,4]<- c("Opulus")
} else if (products_with_category_ordered_2[row,3]=="OSM") {products_with_category_ordered_2[row,4]<- c("Osmo")
} else if (products_with_category_ordered_2[row,3]=="OTR") {products_with_category_ordered_2[row,4]<- c("Startech")
} else if (products_with_category_ordered_2[row,3]=="OTT") {products_with_category_ordered_2[row,4]<- c("OtterBox ")
} else if (products_with_category_ordered_2[row,3]=="OWC") {products_with_category_ordered_2[row,4]<- c("OWC")
} else if (products_with_category_ordered_2[row,3]=="PAC") {products_with_category_ordered_2[row,4]<- c("Packs")
} else if (products_with_category_ordered_2[row,3]=="PAR") {products_with_category_ordered_2[row,4]<- c("Parrot")
} else if (products_with_category_ordered_2[row,3]=="PEB") {products_with_category_ordered_2[row,4]<- c("Pebble")
} else if (products_with_category_ordered_2[row,3]=="PHI") {products_with_category_ordered_2[row,4]<- c("Philips")
} else if (products_with_category_ordered_2[row,3]=="PIE") {products_with_category_ordered_2[row,4]<- c("Pieza_Apple")
} else if (products_with_category_ordered_2[row,3]=="PLA") {products_with_category_ordered_2[row,4]<- c("Plantronic")
} else if (products_with_category_ordered_2[row,3]=="POL") {products_with_category_ordered_2[row,4]<- c("Polaroid")
} else if (products_with_category_ordered_2[row,3]=="PQI") {products_with_category_ordered_2[row,4]<- c("Pqi")
} else if (products_with_category_ordered_2[row,3]=="PRO") {products_with_category_ordered_2[row,4]<- c("Promise")
} else if (products_with_category_ordered_2[row,3]=="PRY") {products_with_category_ordered_2[row,4]<- c("Prynt")
} else if (products_with_category_ordered_2[row,3]=="PUR") {products_with_category_ordered_2[row,4]<- c("Puro")
} else if (products_with_category_ordered_2[row,3]=="QAR") {products_with_category_ordered_2[row,4]<- c("Qardio")
} else if (products_with_category_ordered_2[row,3]=="QDO") {products_with_category_ordered_2[row,4]<- c("QDos")
} else if (products_with_category_ordered_2[row,3]=="QNA") {products_with_category_ordered_2[row,4]<- c("QNAP")
} else if (products_with_category_ordered_2[row,3]=="RAI") {products_with_category_ordered_2[row,4]<- c("RainDesign")
} else if (products_with_category_ordered_2[row,3]=="REP") {products_with_category_ordered_2[row,4]<- c("Reparacion_Apple")
} else if (products_with_category_ordered_2[row,3]=="RET") {products_with_category_ordered_2[row,4]<- c("Retrak")
} else if (products_with_category_ordered_2[row,3]=="RUT") {products_with_category_ordered_2[row,4]<- c("Runtastic")
} else if (products_with_category_ordered_2[row,3]=="RYV") {products_with_category_ordered_2[row,4]<- c("Ryval")
} else if (products_with_category_ordered_2[row,3]=="SAM") {products_with_category_ordered_2[row,4]<- c("Samsung")
} else if (products_with_category_ordered_2[row,3]=="SAN") {products_with_category_ordered_2[row,4]<- c("Sandisk ")
} else if (products_with_category_ordered_2[row,3]=="SAT") {products_with_category_ordered_2[row,4]<- c("Satechi")
} else if (products_with_category_ordered_2[row,3]=="SDE") {products_with_category_ordered_2[row,4]<- c("SDesign")
} else if (products_with_category_ordered_2[row,3]=="SEA") {products_with_category_ordered_2[row,4]<- c("Seagate")
} else if (products_with_category_ordered_2[row,3]=="SEV") {products_with_category_ordered_2[row,4]<- c("Servicio_Apple")
} else if (products_with_category_ordered_2[row,3]=="SHE") {products_with_category_ordered_2[row,4]<- c("SwitchEasy")
} else if (products_with_category_ordered_2[row,3]=="SNA") {products_with_category_ordered_2[row,4]<- c("Sena")
} else if (products_with_category_ordered_2[row,3]=="SNN") {products_with_category_ordered_2[row,4]<- c("Sonnet")
} else if (products_with_category_ordered_2[row,3]=="SNS") {products_with_category_ordered_2[row,4]<- c("Sonos")
} else if (products_with_category_ordered_2[row,3]=="SOF") {products_with_category_ordered_2[row,4]<- c("Parallels")
} else if (products_with_category_ordered_2[row,3]=="SPE") {products_with_category_ordered_2[row,4]<- c("Speck")
} else if (products_with_category_ordered_2[row,3]=="SPH") {products_with_category_ordered_2[row,4]<- c("Sphero")
} else if (products_with_category_ordered_2[row,3]=="SSE") {products_with_category_ordered_2[row,4]<- c("Sen.se")
} else if (products_with_category_ordered_2[row,3]=="STA") {products_with_category_ordered_2[row,4]<- c("StarTech")
} else if (products_with_category_ordered_2[row,3]=="STC") {products_with_category_ordered_2[row,4]<- c("Stacked")
} else if (products_with_category_ordered_2[row,3]=="STI") {products_with_category_ordered_2[row,4]<- c("Stil")
} else if (products_with_category_ordered_2[row,3]=="STK") {products_with_category_ordered_2[row,4]<- c("Stikgo")
} else if (products_with_category_ordered_2[row,3]=="STM") {products_with_category_ordered_2[row,4]<- c("STM")
} else if (products_with_category_ordered_2[row,3]=="SXA") {products_with_category_ordered_2[row,4]<- c("SecurityXtra")
} else if (products_with_category_ordered_2[row,3]=="SYN") {products_with_category_ordered_2[row,4]<- c("Synology")
} else if (products_with_category_ordered_2[row,3]=="TAD") {products_with_category_ordered_2[row,4]<- c("Tado")
} else if (products_with_category_ordered_2[row,3]=="TAM") {products_with_category_ordered_2[row,4]<- c("Tangram")
} else if (products_with_category_ordered_2[row,3]=="TCH") {products_with_category_ordered_2[row,4]<- c("Tech21")
} else if (products_with_category_ordered_2[row,3]=="THU") {products_with_category_ordered_2[row,4]<- c("Thule")
} else if (products_with_category_ordered_2[row,3]=="TIG") {products_with_category_ordered_2[row,4]<- c("Tigra")
} else if (products_with_category_ordered_2[row,3]=="TIL") {products_with_category_ordered_2[row,4]<- c("Tile")
} else if (products_with_category_ordered_2[row,3]=="TOS") {products_with_category_ordered_2[row,4]<- c("Toshiba")
} else if (products_with_category_ordered_2[row,3]=="TPL") {products_with_category_ordered_2[row,4]<- c("TP_Link")
} else if (products_with_category_ordered_2[row,3]=="TRA") {products_with_category_ordered_2[row,4]<- c("Transcend")
} else if (products_with_category_ordered_2[row,3]=="TRI") {products_with_category_ordered_2[row,4]<- c("Tribe")
} else if (products_with_category_ordered_2[row,3]=="TRK") {products_with_category_ordered_2[row,4]<- c("TrackR")
} else if (products_with_category_ordered_2[row,3]=="TRN") {products_with_category_ordered_2[row,4]<- c("Trunk")
} else if (products_with_category_ordered_2[row,3]=="TUC") {products_with_category_ordered_2[row,4]<- c("Tucano")
} else if (products_with_category_ordered_2[row,3]=="TWS") {products_with_category_ordered_2[row,4]<- c("Twelve_South")
} else if (products_with_category_ordered_2[row,3]=="UAG") {products_with_category_ordered_2[row,4]<- c("Urban_Armor_Gear")
} else if (products_with_category_ordered_2[row,3]=="WAC") {products_with_category_ordered_2[row,4]<- c("Wacom")
} else if (products_with_category_ordered_2[row,3]=="WDT") {products_with_category_ordered_2[row,4]<- c("Western_Digital ")
} else if (products_with_category_ordered_2[row,3]=="WHO") {products_with_category_ordered_2[row,4]<- c("Whoosh")
} else if (products_with_category_ordered_2[row,3]=="WIK") {products_with_category_ordered_2[row,4]<- c("Wikango")
} else if (products_with_category_ordered_2[row,3]=="WIT") {products_with_category_ordered_2[row,4]<- c("Withings")
} else if (products_with_category_ordered_2[row,3]=="WOE") {products_with_category_ordered_2[row,4]<- c("Wowewa")
} else if (products_with_category_ordered_2[row,3]=="XDO") {products_with_category_ordered_2[row,4]<- c("XDoria_Apple")
} else if (products_with_category_ordered_2[row,3]=="XOO") {products_with_category_ordered_2[row,4]<- c("Xoopar ")
} else if (products_with_category_ordered_2[row,3]=="XRI") {products_with_category_ordered_2[row,4]<- c("X-Rite")
} else if (products_with_category_ordered_2[row,3]=="XTO") {products_with_category_ordered_2[row,4]<- c("Xtorm")
} else if (products_with_category_ordered_2[row,3]=="ZAG") {products_with_category_ordered_2[row,4]<- c("Zagg ")
} else if (products_with_category_ordered_2[row,3]=="ZEP") {products_with_category_ordered_2[row,4]<- c("Zeep")
} else if (products_with_category_ordered_2[row,3]=="TEMPORAL") {products_with_category_ordered_2[row,4]<- c("Unknown_Category_Brand")
} else products_with_category_ordered_2[row,4]<- c("Unknown_Brand")
}
products_with_category_ordered_2$category_brand <- as.character(c("nada"))
products_with_category_ordered_2$category_brand <- paste(products_with_category_ordered_2$manual_categories, products_with_category_ordered_2$trade_mark_full, sep="-")
products_with_category_ordered_2$category_brand <- as.factor(products_with_category_ordered_2$category_brand)
trans_epic5 <- trans_epic3
trans_epic5@itemInfo$category_brand <- products_with_category_ordered_2$category_brand
trans_epic5 <- aggregate(trans_epic5, itemInfo(trans_epic5)[["category_brand"]])
View(trans_epic5)
barplot(trans_epic5@itemInfo$category_brand)
barplot(products_with_category_ordered_2)
barplot(products_with_category_ordered_2$category_brand)
histogram(products_with_category_ordered_2$category_brand)
ggplot(products_with_category_ordered_2, aes(category_brand, fill=identity())) + geom_bar(stat='identity'), position = position_stack(vjust = .5))+ ggtitle("Orders made in the online shop ", subtitle= "Proportion of orders by State of the orders")
View(products_with_category_ordered_2)
View(trans_epic2)
View(trans_epic4)
View(trans_epic6)
LIST(trans_epic2)
nuevo <- as.matrix((tans_epic5))
nuevo <- as.matrix(trans_epic5)
nuevo <- as(trans_epic5, "matrix")
nuevo <- as.data.frame(nuevo)
View(nuevo)
length(unique(orders_dos_mas$id_order))
write.xlsx(nuevo, "matrix.xlsx")
library("write.xlsx")
require(writexls)
library("readxl")
write.xlsx(nuevo, "matrix.xlsx")
require("readxl")
write.xlsx(nuevo, "matrix.xlsx")
write.xlsx(nuevo, "matri.xlsx")
write.xls(nuevo, "matri.xlsx")
write.csv(nuevo, "nuevo.csv")
length(unique(lineitems$id_order))
View(lineitems)
View(lineitems)
orders_total <- lineitems %>% group_by(id_order) %>% filter (n() >= 1)
View(orders_total)
View(orders_trans)
match_total <- which(orders_dos_mas$id_order %in% lineitems$id_order)
orders_full <- lineitems [match,]
View(orders_full)
length(orders_trans)
nrow(orders_trans)
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() = 1)
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
View(orders_uno_trans)
head(top10)
head(top10_2)
head(orders_trans_2)
orders_uno_trans <- group_by(id_order) %>% mutate(count_uno = count(id_order))
orders_uno_trans <- group_by(sku) %>% mutate(count_uno = count(id_order))
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% mutate(count_uno = count(sku))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% mutate(count_uno = count(sku))
str(orders_uno_trans)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% mutate(count_uno = count(sku))
orders_uno_trans$sku <- as.character((orders_uno_trans$sku))
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% mutate(count_uno = count(sku))
?group_by
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
str(orders_trans_2)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% mutate(count_uno = count(sku))
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = count())
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = n())
orders_denominador <- orders_trans %>% group_by(sku) %>% summarize(count_uno = n())
View(orders_denominador)
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_uno = n())
View(orders_numerador)
View(match_total)
length(unique(orders_dos_mas$id_order))
length(which (Orders_completed$id_order %in% orders_dos_mas$id_order))
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_dos_mas = n())
which(c(1,2,3) %in% c(1,1,1))
which(c(1,2,3) %in% c(1,1,3))
which(c(7,2,3) %in% c(7,1,3))
match_social <- match(orders_uno_trans$sku, orders_numerador$sku)
View(match_social)
orders_numerador_unir <- orders_numerador[match_social,]
View(orders_numerador_unir)
orders_social_final <- as.data.frame(orders_numerador_unir, orders_uno_trans$sku)
View(orders_social_final)
View(orders_numerador_unir)
orders_social_final <- orders_uno_trans
orders_uno_trans$denominador <- orders_numerador$count_dos_mas
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = n())
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_dos_mas = n())
match_social <- match(orders_uno_trans$sku, orders_numerador$sku)
orders_numerador_unir <- orders_numerador[match_social,]
orders_social_final <- orders_uno_trans
orders_uno_trans$denominador <- orders_numerador_unir$count_dos_mas
View(orders_uno_trans)
orders_social_final <- orders_numerador_unir$count_dos_mas
View(orders_social_final)
orders_social_final$denominador <- orders_numerador_unir$count_dos_mas
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = n())
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_dos_mas = n())
match_social <- match(orders_uno_trans$sku, orders_numerador$sku)
orders_numerador_unir <- orders_numerador[match_social,]
orders_social_final <- orders_uno_trans
View(orders_social_final)
orders_social_final$denominador <- orders_numerador_unir$count_dos_mas
View(orders_social_final)
orders_social_final[is.na(orders_social_final)] <- 0
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = n())
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_dos_mas = n())
match_social <- match(orders_uno_trans$sku, orders_numerador$sku)
orders_numerador_unir <- orders_numerador[match_social,]
orders_social_final <- orders_uno_trans
orders_social_final$numerador <- orders_numerador_unir$count_dos_mas
orders_social_final$numerador <- orders_social_final$numerador
View(orders_uno_trans )
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = n())
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_dos_mas = n())
View(orders_uno_trans)
View(orders_numerador)
match_social <- match(orders_uno_trans$sku, orders_numerador$sku)
orders_numerador_unir <- orders_numerador[match_social,]
View(match_social)
orders_numerador_unir <- orders_numerador[match_social,]
orders_social_final <- orders_uno_trans
orders_social_final$numerador <- orders_numerador_unir$count_dos_mas
orders_social_final$numerador <- orders_social_final$numerador
orders_social_final[is.na(orders_social_final)] <- 0
View(orders_social_final)
orders_social_final$sociability <- as.numeric(orders_social_final$numerador/orders_social_final$count_uno)
full_join(c(1,2,3,4,5), c(1,2,3,5,6))
match(c(1,2,3,4,5), c(1,2,3,5,6))
full_join_social <- full_join(x=orders_uno_trans, y= orders_numerador, by= "sku")
View(full_join_social)
View(full_join_social)
full_join_social <- full_join_social[,c(1,3,2)]
full_join_social[is.na(full_join_social$count_dos_mas)] <- 0
full_join_social$count_dos_mas[is.na(full_join_social$count_dos_mas)] <- 0
full_join_social$sociability <- as.numeric(full_join_social$count_dos_mas/full_join_social$count_uno)
products_translated_social<- read.csv("products_translated.csv", sep=",")
View(products_translated_social)
str(products_translated_social)
rapid_miner  <- full_join_social
rapid_miner <- full_join_social[,-c(2:3)]
View(rapid_miner)
rapid_miner$precio <- left_join(x=rapid_miner, y= products_translated_social$price, by= "sku")
rapid_miner_2 <- left_join(x=rapid_miner, y= products_translated_social, by= "sku")
View(rapid_miner_2 )
rapid_miner_2 <- rapid_miner_2[,c(1,2,7)]
full_join_social <- full_join(x=orders_uno_trans, y= orders_numerador, by= "sku")
full_join_social <- full_join_social[,c(1,3,2)]
full_join_social$count_dos_mas[is.na(full_join_social$count_dos_mas)] <- 0
full_join_social$sociability <- as.numeric(full_join_social$count_dos_mas/full_join_social$count_uno)
products_translated_social<- read.csv("products_translated.csv", sep=",")
rapid_miner  <- full_join_social
rapid_miner <- full_join_social[,-c(2:3)]
rapid_miner_2 <- right_join(x=rapid_miner, y= products_translated_social, by= "sku")
rapid_miner_2 <- rapid_miner_2[,c(1,2,7)]
full_join_social <- full_join(x=orders_uno_trans, y= orders_numerador, by= "sku")
full_join_social <- full_join_social[,c(1,3,2)]
full_join_social$count_dos_mas[is.na(full_join_social$count_dos_mas)] <- 0
full_join_social$sociability <- as.numeric(full_join_social$count_dos_mas/full_join_social$count_uno)
products_translated_social<- read.csv("products_translated.csv", sep=",")
rapid_miner  <- full_join_social
rapid_miner <- full_join_social[,-c(2:3)]
rapid_miner_2 <- left_join( x= products_translated_social, y=rapid_miner, by= "sku")
rapid_miner_2 <- rapid_miner_2[,c(1,2,7)]
match_rapid <- match(products_translated_social$sku, rapid_miner$sku)
full_join_social <- full_join(x=orders_uno_trans, y= orders_numerador, by= "sku")
full_join_social <- full_join_social[,c(1,3,2)]
full_join_social$count_dos_mas[is.na(full_join_social$count_dos_mas)] <- 0
full_join_social$sociability <- as.numeric(full_join_social$count_dos_mas/full_join_social$count_uno)
products_translated_social<- read.csv("products_translated.csv", sep=",")
rapid_miner  <- full_join_social
rapid_miner <- full_join_social[,-c(2:3)]
match_rapid <- match(rapid_miner$sku, products_translated_social$sku)
price <- products_translated_social$price [,match_rapid]
price <- products_translated_social [,match_rapid]
match_rapid <- match(products_translated_social$sku, rapid_miner$sku)
price <- products_translated_social [,match_rapid]
View(products_translated_social)
match_rapid <- match(products_translated_social$sku, rapid_miner$sku)
price <- products_translated_social [match_rapid,]
View(price)
price <- products_translated_social$price
rapid_miner$price <- price
match(c(1,2,3,4), c(1,3))
View(price)
View(rapid_miner)
price <- lineitems %>% group_by(sku) %>% summarize(mean(unit_price))
View(price)
price <- lineitems %>% group_by(sku) %>% summarize(price=mean(unit_price))
View(price)
price <- lineitems %>% group_by(sku) %>% summarize(mean=(unit_price))
price <- lineitems %>% group_by(sku) %>% summarize(precio= mean=(unit_price))
price <- lineitems %>% group_by(sku) %>% summarize(precio= mean(unit_price))
View(price)
View(price)
View(lineitems)
price <- lineitems %>% group_by(sku) %>% summarize(precio= mean(unit_price))
precioso <- lineitems %>% group_by(sku) %>% summarize(precio= mean(unit_price))
View(precioso)
View(rapid_miner)
View(orders_social_final)
orders_uno <- lineitems %>% group_by(id_order) %>% filter (n() == 1)
match_total <- which(orders_uno$id_order %in% Orders_completed$id_order)
orders_uno_trans <- orders_uno[match_total,]
orders_uno_trans$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", orders_uno_trans$unit_price)))
orders_uno_trans$sku <- as.factor(orders_uno_trans$sku)
orders_uno_trans <- orders_uno_trans %>% group_by(sku) %>% summarize(count_uno = n())
orders_numerador <- orders_trans %>% group_by(sku) %>% summarize(count_dos_mas = n())
match_social <- match(orders_uno_trans$sku, orders_numerador$sku)
orders_numerador_unir <- orders_numerador[match_social,]
orders_social_final <- orders_uno_trans
orders_social_final$numerador <- orders_numerador_unir$count_dos_mas
orders_social_final$numerador <- orders_social_final$numerador
full_join_social <- full_join(x=orders_uno_trans, y= orders_numerador, by= "sku")
full_join_social <- full_join_social[,c(1,3,2)]
full_join_social$count_dos_mas[is.na(full_join_social$count_dos_mas)] <- 0
full_join_social$sociability <- as.numeric(full_join_social$count_dos_mas/full_join_social$count_uno)
full_join_social$sociability[is.na(full_join_social$sociability)] <- 70
rapid_miner  <- full_join_social
rapid_miner <- full_join_social[,-c(2:3)]
lineitems$unit_price <- as.numeric(gsub(",", ".", gsub("\\.", "", lineitems$unit_price)))
price <- lineitems %>% group_by(sku) %>% summarize(precio= mean(unit_price))
View(price)
rapid_miner_2 <- left_join(rapid_miner,price, by= "sku")
View(rapid_miner_2)
match_category <- match(rapid_miner_2$sku ,products_with_category$sku)
products_with_category_rapid_miner <- products_with_category[match_category,]
rapid_miner_3$category <- products_with_category_rapid_miner$manual_categories
rapid_miner_2$category <- products_with_category_rapid_miner$manual_categories
rapid_miner_3 <- rapid_miner_2[complete.cases(rapid_miner_2), ]
View(rapid_miner_3 )
products_with_category<- read.csv("products_with_category.csv", sep=",")
View(lineitems)
View(trans)
View(orders_translated)
para_cluster <- lineitems %>% group_by(sku) %>% summarise(apariciones = n(),
media_repe = mean(product_quantity),
total_vendido_qa = sum(product_quantity),
transacciones = length(unique(id_order))) %>%
mutate(total_vendido = apariciones * media_repe)
View(para_cluster)
por_orden <- lineitems %>% group_by(id_order) %>% summarise(acompanantes = n()-1)
View(por_orden)
por_orden$acompanantes <- as.numeric(as.character(por_orden$acompanantes))
match_cluster <- match(rapid_miner_3$sku,para_cluster$sku)
para_cluster_2 <- para_cluster[match_cluste,]
para_cluster_2 <- para_cluster[match_cluster,]
rapid_miner_3$total_vendido_qa <- para_cluster_2$total_vendido_qa
rapid_miner_3$total_vendido <- para_cluster_2$total_vendido
rapid_miner_4 <- rapid_miner_3[complete.cases(rapid_miner_3), ]
View(rapid_miner_4)
write.xlsx(rapid_miner_4, "rapid_miner_4.xlsx")
write.csv(rapid_miner_4, rapid_miner_4.ccv)
write.csv(rapid_miner_4, rapid_miner_4.csv)
write.csv(rapid_miner_4)
write.csv2(rapid_miner_4, file = "rapid_miner_4.csv")
View(para_cluster)
rapid_miner_3 <- rapid_miner_2[complete.cases(rapid_miner_2), ]
rapid_miner_3$apariciones<- para_cluster_2$apariciones
rapid_miner_3$media_repe<- para_cluster_2$media_repe
rapid_miner_3$total_vendido <- para_cluster_2$total_vendido
rapid_miner_4 <- rapid_miner_3[complete.cases(rapid_miner_3), ]
write.csv2(rapid_miner_4, file = "rapid_miner_4.csv")
